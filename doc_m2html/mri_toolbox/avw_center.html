<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of avw_center</title>
  <meta name="keywords" content="avw_center">
  <meta name="description" content="avw_center - find center of a volume">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">mri_toolbox</a> &gt; avw_center.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mri_toolbox&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>avw_center
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>avw_center - find center of a volume</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function center = avw_center(avw) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> avw_center - find center of a volume

 [center] = avw_center(avw)

 avw  - an Analyze 7.5 data struct, see avw_read

 center is the Cartesian coordinates for
 the volume center.  It is a struct with
 coordinates in both voxels and mm (1x3).
 
 center.corner is the result of floor(xdim/2),
 center.abs is the result of (xdim/2).
 
 Finding the center of a voxel based
 volume can be done in several ways.
 
 The absolute center point in a volume will 
 lie either within the center of the middle
 voxel or at the boundary between two voxels
 (depending on whether the volume has an odd
 or even number of voxels in any dimension).
 
 The corner values are the voxel that lies 
 just before the absolute center point of 
 the volume.
 
 The mm coordinates are simply the voxel values
 multiplied by the pixel dimensions.

 Given correctly oriented Analyze 7.5 files, the 
 corner values lie at the right, posterior 
 and inferior corner of the voxel.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="avw_paint.html" class="code" title="">avw_paint</a>	script to test vertex to voxel coordinate mapping</li><li><a href="avw_shrinkwrap.html" class="code" title="function [FV, Edges] = avw_shrinkwrap(avw,FV,smooth,vthresh,interpVal,fitval,fittol,fititer,fitchange,fitvattr)">avw_shrinkwrap</a>	avw_shrinkwrap - Tesselate the surface of a 3D Analyze 7.5 avw struct</li><li><a href="avw_view.html" class="code" title="function [ varargout ] = avw_view(avw,parent,command),">avw_view</a>	avw_view - create and navigate ortho views of Analyze 7.5 volume</li><li><a href="avw_view_new.html" class="code" title="function [ varargout ] = avw_view(avw,parent,command),">avw_view_new</a>	avw_view - create and navigate ortho views of Analyze 7.5 volume</li></ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function center = avw_center(avw)</a>
0002 
0003 <span class="comment">% avw_center - find center of a volume</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% [center] = avw_center(avw)</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% avw  - an Analyze 7.5 data struct, see avw_read</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% center is the Cartesian coordinates for</span>
0010 <span class="comment">% the volume center.  It is a struct with</span>
0011 <span class="comment">% coordinates in both voxels and mm (1x3).</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% center.corner is the result of floor(xdim/2),</span>
0014 <span class="comment">% center.abs is the result of (xdim/2).</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% Finding the center of a voxel based</span>
0017 <span class="comment">% volume can be done in several ways.</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% The absolute center point in a volume will</span>
0020 <span class="comment">% lie either within the center of the middle</span>
0021 <span class="comment">% voxel or at the boundary between two voxels</span>
0022 <span class="comment">% (depending on whether the volume has an odd</span>
0023 <span class="comment">% or even number of voxels in any dimension).</span>
0024 <span class="comment">%</span>
0025 <span class="comment">% The corner values are the voxel that lies</span>
0026 <span class="comment">% just before the absolute center point of</span>
0027 <span class="comment">% the volume.</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% The mm coordinates are simply the voxel values</span>
0030 <span class="comment">% multiplied by the pixel dimensions.</span>
0031 <span class="comment">%</span>
0032 <span class="comment">% Given correctly oriented Analyze 7.5 files, the</span>
0033 <span class="comment">% corner values lie at the right, posterior</span>
0034 <span class="comment">% and inferior corner of the voxel.</span>
0035 <span class="comment">%</span>
0036 
0037 <span class="comment">% $Revision: 1.1 $ $Date: 2004/04/08 20:12:52 $</span>
0038 
0039 <span class="comment">% Licence:  GNU GPL, no implied or express warranties</span>
0040 <span class="comment">% History:  08/2003, Darren.Weber_at_radiology.ucsf.edu</span>
0041 <span class="comment">%</span>
0042 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0043 
0044 version = <span class="string">'[$Revision: 1.1 $]'</span>;
0045 fprintf(<span class="string">'\nAVW_CENTER [v%s]\n'</span>,version(12:16));  tic;
0046 
0047 <span class="comment">% Extract info from avw.hdr</span>
0048 xdim = double(avw.hdr.dime.dim(2));
0049 ydim = double(avw.hdr.dime.dim(3));
0050 zdim = double(avw.hdr.dime.dim(4));
0051 
0052 xpix = double(avw.hdr.dime.pixdim(2));
0053 ypix = double(avw.hdr.dime.pixdim(3));
0054 zpix = double(avw.hdr.dime.pixdim(4));
0055 
0056 <span class="comment">% Find center voxel of volume</span>
0057 center.corner.voxels = zeros(1,3);
0058 center.corner.voxels(1,1) = floor(xdim/2);
0059 center.corner.voxels(1,2) = floor(ydim/2);
0060 center.corner.voxels(1,3) = floor(zdim/2);
0061 
0062 <span class="comment">% Find mm coordinates of that voxel</span>
0063 center.corner.mm = zeros(1,3);
0064 center.corner.mm(1,1) = center.corner.voxels(1,1) .* xpix;
0065 center.corner.mm(1,2) = center.corner.voxels(1,2) .* ypix;
0066 center.corner.mm(1,3) = center.corner.voxels(1,3) .* zpix;
0067 
0068 <span class="comment">% Find center voxel of volume</span>
0069 center.abs.voxels = zeros(1,3);
0070 center.abs.voxels(1,1) = xdim/2;
0071 center.abs.voxels(1,2) = ydim/2;
0072 center.abs.voxels(1,3) = zdim/2;
0073 
0074 <span class="comment">% Find mm coordinates of that voxel</span>
0075 center.abs.mm = zeros(1,3);
0076 center.abs.mm(1,1) = center.abs.voxels(1,1) .* xpix;
0077 center.abs.mm(1,2) = center.abs.voxels(1,2) .* ypix;
0078 center.abs.mm(1,3) = center.abs.voxels(1,3) .* zpix;
0079 
0080 <span class="keyword">return</span></pre></div>
<hr><address>Generated on Mon 29-Mar-2004 13:14:32 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>