<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of brik2mgh</title>
  <meta name="keywords" content="brik2mgh">
  <meta name="description" content="BRIK2MGH function to read 3D+time AFNI BRIK">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">mri_toolbox</a> &gt; brik2mgh.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mri_toolbox&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>brik2mgh
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>BRIK2MGH function to read 3D+time AFNI BRIK</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function BRIK2MGH(fname,xdim,ydim,zdim,timepoints,type,foutstem) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> BRIK2MGH function to read 3D+time AFNI BRIK
 of any type and dimensionality and convert
 to MGH-style bshort of bfloat files and 
 accompanying MGH header files

 Example: this writes out 16 .bshort and .hdr files
 BRIK2MGH('/data9/mike/AS/afni/ASt3avvr+orig.BRIK',64,64,16,100,'short','test_')

 Written December 11, 1998 by Timothy M. Ellmore
 Laboratory of Brain and Cognition, NIMH</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function BRIK2MGH(fname,xdim,ydim,zdim,timepoints,type,foutstem)</a>
0002 <span class="comment">% BRIK2MGH function to read 3D+time AFNI BRIK</span>
0003 <span class="comment">% of any type and dimensionality and convert</span>
0004 <span class="comment">% to MGH-style bshort of bfloat files and</span>
0005 <span class="comment">% accompanying MGH header files</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% Example: this writes out 16 .bshort and .hdr files</span>
0008 <span class="comment">% BRIK2MGH('/data9/mike/AS/afni/ASt3avvr+orig.BRIK',64,64,16,100,'short','test_')</span>
0009 <span class="comment">%</span>
0010 <span class="comment">% Written December 11, 1998 by Timothy M. Ellmore</span>
0011 <span class="comment">% Laboratory of Brain and Cognition, NIMH</span>
0012 
0013 disp(<span class="string">' '</span>)
0014 disp(<span class="string">'**********************************'</span>)
0015 disp(<span class="string">' '</span>)
0016 disp(<span class="string">'BRIK2MGH: reading raw data . . . .'</span>)
0017 fid = fopen(fname, <span class="string">'rb'</span>);
0018 data = fread(fid, [xdim * ydim * zdim * timepoints], type);
0019 disp([<span class="string">'max: '</span> num2str(max(data(:))) <span class="string">', min: '</span>  num2str(min(data(:))) ])
0020 fclose(fid);
0021 disp(<span class="string">'BRIK2MGH: done reading raw data !'</span>)
0022 disp(<span class="string">' '</span>)
0023 
0024 disp(<span class="string">'BRIK2MGH: reshaping raw data to 3D+time matrix . . . .'</span>)
0025 V = reshape(data,xdim,ydim,zdim,timepoints);
0026 disp(<span class="string">'BRIK2MGH: done reshaping raw data to 3D+time matrix !'</span>)
0027 disp(<span class="string">' '</span>)
0028 
0029 disp(<span class="string">'BRIK2MGH: writing MGH-style image files . . . .'</span>)
0030 disp(<span class="string">' '</span>)
0031 
0032 bfile =  zeros(xdim,ydim,timepoints);
0033 
0034 <span class="comment">% cycle over slices and make a volume</span>
0035 <span class="comment">% where the new zdimension is timpoints</span>
0036 
0037 <span class="keyword">for</span> i = 1:zdim
0038 
0039  <span class="comment">% make file of timepoints</span>
0040  bfile(:,:,:) = V(:,:,i,:);
0041 
0042  <span class="comment">% create the bfile name</span>
0043  suffix = [<span class="string">'.b'</span> type];
0044  outfname = sprintf(<span class="string">'%s%03d%s%s'</span>,foutstem,i-1,suffix);
0045 
0046  <span class="comment">% write out the bfile</span>
0047  
0048  disp([<span class="string">'BRIK2MGH: writing file '</span> num2str(outfname) <span class="string">', max: '</span> num2str(max(bfile(:))) <span class="string">', min: '</span> num2str(min(bfile(:))) ])
0049  fid = fopen(outfname, <span class="string">'w'</span>);
0050  fwrite(fid, bfile(:), type);
0051  fclose(fid);
0052 
0053  <span class="comment">% write out a header file</span>
0054  hdrfname = sprintf(<span class="string">'%s%03d%s'</span>,foutstem,i-1,<span class="string">'.hdr'</span>);
0055  fid = fopen(hdrfname,<span class="string">'w'</span>);
0056  fprintf(fid,<span class="string">'%d %d %d 0\n'</span>,xdim, ydim, timepoints);
0057  fclose(fid);
0058 
0059 <span class="keyword">end</span>
0060 
0061 disp(<span class="string">' '</span>)
0062 disp(<span class="string">'Done!'</span>)
0063 
0064 
0065       
0066 
0067     
0068       
0069         
0070</pre></div>
<hr><address>Generated on Mon 29-Mar-2004 13:14:32 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>