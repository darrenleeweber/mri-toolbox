<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of gui_mri_open</title>
  <meta name="keywords" content="gui_mri_open">
  <meta name="description" content="gui_mri_open - Load & Display MRI data">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">mri_toolbox</a> &gt; gui_mri_open.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mri_toolbox&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>gui_mri_open
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>gui_mri_open - Load & Display MRI data</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function [mri] = gui_mri_open(mri,command,parent) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> gui_mri_open - Load &amp; Display MRI data
 
 Useage: [mri] = gui_mri_open(mri,[command],[parent])
 
 mri is a structure, generated by 'mri_toolbox_defaults'
 command is either 'init' or 'load'
 parent is a handle to the gui that calls this gui, useful
 for updating the UserData field of the parent from this gui.
 The mri structure may be returned to the parent when the parent 
 handle is given.

 The toolbox can currently read Analyze 7.5, GE Signa/Lx,
 and FreeSurfer COR data.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="mri_open.html" class="code" title="function [mri] = mri_open(mri)">mri_open</a>	mri_open - function to call various mri data tools</li><li><a href="mri_toolbox_defaults.html" class="code" title="function [mri] = mri_toolbox_defaults(command,mri);">mri_toolbox_defaults</a>	mri_toolbox_defaults - Create, read, write mri_toolbox defaults</li><li><a href="mri_updateparent.html" class="code" title="function [mri] = mri_updateparent(UserData,focus)">mri_updateparent</a>	mri_updateparent - General GUI data handing for MRI Toolbox</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function [MRIOpen] = INIT(mri,parent)</a></li></ul>
<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [mri] = gui_mri_open(mri,command,parent)</a>
0002 
0003 <span class="comment">% gui_mri_open - Load &amp; Display MRI data</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% Useage: [mri] = gui_mri_open(mri,[command],[parent])</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% mri is a structure, generated by 'mri_toolbox_defaults'</span>
0008 <span class="comment">% command is either 'init' or 'load'</span>
0009 <span class="comment">% parent is a handle to the gui that calls this gui, useful</span>
0010 <span class="comment">% for updating the UserData field of the parent from this gui.</span>
0011 <span class="comment">% The mri structure may be returned to the parent when the parent</span>
0012 <span class="comment">% handle is given.</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% The toolbox can currently read Analyze 7.5, GE Signa/Lx,</span>
0015 <span class="comment">% and FreeSurfer COR data.</span>
0016 <span class="comment">%</span>
0017 
0018 <span class="comment">% $Revision: 1.2 $ $Date: 2004/04/08 20:11:24 $</span>
0019 
0020 <span class="comment">% Licence:  GNU GPL, no express or implied warranties</span>
0021 <span class="comment">% History:  08/2002, Darren.Weber@flinders.edu.au</span>
0022 <span class="comment">%</span>
0023 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0024 
0025 
0026 <span class="keyword">if</span> ~exist(<span class="string">'mri'</span>,<span class="string">'var'</span>),
0027     mri = <a href="mri_toolbox_defaults.html" class="code" title="function [mri] = mri_toolbox_defaults(command,mri);">mri_toolbox_defaults</a>;
0028 <span class="keyword">elseif</span> isempty(mri),
0029     mri = <a href="mri_toolbox_defaults.html" class="code" title="function [mri] = mri_toolbox_defaults(command,mri);">mri_toolbox_defaults</a>;
0030 <span class="keyword">end</span>
0031 
0032 <span class="keyword">if</span> ~exist(<span class="string">'command'</span>,<span class="string">'var'</span>),
0033     command = <span class="string">'init'</span>;
0034 <span class="keyword">elseif</span> isempty(command),
0035     command = <span class="string">'init'</span>;
0036 <span class="keyword">end</span>
0037 
0038 command = lower(command);
0039 
0040 <span class="keyword">switch</span> command,
0041 <span class="keyword">case</span> <span class="string">'init'</span>,
0042     <span class="keyword">if</span> exist(<span class="string">'parent'</span>,<span class="string">'var'</span>),
0043         MRIOpen = <a href="#_sub1" class="code" title="subfunction [MRIOpen] = INIT(mri,parent)">INIT</a>(mri,parent);
0044     <span class="keyword">else</span>
0045         MRIOpen = <a href="#_sub1" class="code" title="subfunction [MRIOpen] = INIT(mri,parent)">INIT</a>(mri,<span class="string">''</span>);
0046     <span class="keyword">end</span>
0047 <span class="keyword">otherwise</span>,
0048     MRIOpen = get(gcbf,<span class="string">'Userdata'</span>);
0049     set(MRIOpen.gui,<span class="string">'Pointer'</span>,<span class="string">'watch'</span>);
0050 <span class="keyword">end</span>
0051 
0052 
0053 <span class="keyword">switch</span> command,
0054     
0055 <span class="keyword">case</span> <span class="string">'plot'</span>,
0056     
0057     MRIOpen.mri.plot = 1;
0058     MRIOpen.mri = <a href="mri_open.html" class="code" title="function [mri] = mri_open(mri)">mri_open</a>(MRIOpen.mri);
0059     
0060 <span class="keyword">case</span> <span class="string">'return'</span>,
0061     
0062     MRIOpen.mri.plot = 0;
0063     MRIOpen.mri = <a href="mri_open.html" class="code" title="function [mri] = mri_open(mri)">mri_open</a>(MRIOpen.mri);
0064     
0065 <span class="keyword">case</span> <span class="string">'save'</span>,
0066     
0067     fprintf(<span class="string">'\ngui_mri_open: Save As not implemented yet.\n'</span>);
0068     
0069 <span class="keyword">otherwise</span>,
0070     
0071 <span class="keyword">end</span>
0072 
0073 
0074 <span class="comment">% -- tidy up &amp; return</span>
0075 
0076 <span class="keyword">switch</span> command,
0077 <span class="keyword">case</span> <span class="string">'init'</span>,
0078 <span class="keyword">case</span> <span class="string">'cancel'</span>,
0079     GUI.parent = MRIOpen.parent;
0080     <a href="mri_updateparent.html" class="code" title="function [mri] = mri_updateparent(UserData,focus)">mri_updateparent</a>(GUI);
0081     close gcbf;
0082 <span class="keyword">otherwise</span>,
0083     set(MRIOpen.gui,<span class="string">'Pointer'</span>,<span class="string">'arrow'</span>);
0084     set(MRIOpen.gui,<span class="string">'Userdata'</span>,MRIOpen);
0085     
0086     mri = <a href="mri_updateparent.html" class="code" title="function [mri] = mri_updateparent(UserData,focus)">mri_updateparent</a>(MRIOpen,0);
0087     
0088     <span class="keyword">if</span> isequal(get(MRIOpen.handles.Bhold,<span class="string">'Value'</span>),0),
0089         close gcbf;
0090         <span class="keyword">if</span> isfield(MRIOpen,<span class="string">'parent'</span>),
0091             parent = MRIOpen.parent.gui;
0092         <span class="keyword">else</span>
0093             parent = [];
0094         <span class="keyword">end</span>
0095     <span class="keyword">else</span>
0096         parent = MRIOpen.gui;
0097     <span class="keyword">end</span>
0098 <span class="keyword">end</span>
0099 
0100 
0101 <span class="keyword">return</span>
0102 
0103 
0104 
0105 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0106 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0107 <a name="_sub1" href="#_subfunctions" class="code">function [MRIOpen] = INIT(mri,parent)</a>
0108     <span class="comment">% GUI General Parameters</span>
0109     
0110     GUIwidth  = 500;
0111     GUIheight = 120;
0112     
0113     version = <span class="string">'$Revision: 1.2 $'</span>;
0114     name = sprintf(<span class="string">'MRI File Open [v %s]\n'</span>,version(11:15));
0115     
0116     GUI = figure(<span class="string">'Name'</span>,name,<span class="string">'Tag'</span>,<span class="string">'MRI_OPEN'</span>,<span class="keyword">...</span>
0117                  <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0118                  <span class="string">'MenuBar'</span>,<span class="string">'none'</span>,<span class="string">'Position'</span>,[1 1 GUIwidth GUIheight]);
0119     movegui(GUI,<span class="string">'center'</span>);
0120     
0121     Font.FontName   = <span class="string">'Helvetica'</span>;
0122     Font.FontUnits  = <span class="string">'Pixels'</span>;
0123     Font.FontSize   = 12;
0124     Font.FontWeight = <span class="string">'normal'</span>;
0125     Font.FontAngle  = <span class="string">'normal'</span>;
0126     
0127     <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0128     <span class="comment">% Voltage Data Selection and Parameters</span>
0129 
0130     G.Title_data = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>,Font, <span class="keyword">...</span>
0131         <span class="string">'Position'</span>,[.01 .75 .17 .2],<span class="keyword">...</span>
0132         <span class="string">'String'</span>,<span class="string">'Data Type:'</span>,<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>);
0133     
0134     <span class="keyword">switch</span> mri.type
0135         <span class="keyword">case</span> <span class="string">'Analyze'</span>,         mriType = 1;
0136         <span class="keyword">case</span> <span class="string">'COR'</span>,             mriType = 2;
0137         <span class="keyword">case</span> <span class="string">'GE Signa/Lx'</span>,     mriType = 3;
0138         <span class="keyword">case</span> <span class="string">'Matlab'</span>,          mriType = 4;
0139         <span class="keyword">otherwise</span>,              mriType = 1;
0140     <span class="keyword">end</span>
0141     G.PmriType = uicontrol(<span class="string">'Tag'</span>,<span class="string">'PmriType'</span>,<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'popupmenu'</span>,<span class="keyword">...</span>
0142         <span class="string">'Units'</span>,<span class="string">'Normalized'</span>,Font,  <span class="keyword">...</span>
0143         <span class="string">'Position'</span>,[.20 .75 .25 .2],<span class="keyword">...</span>
0144         <span class="string">'String'</span>,{<span class="string">'Analyze'</span> <span class="string">'FreeSurfer COR'</span> <span class="string">'GE'</span> <span class="string">'Matlab'</span>},<span class="string">'Value'</span>,mriType,<span class="keyword">...</span>
0145         <span class="string">'Callback'</span>,strcat(<span class="string">'MRIOpen = get(gcbf,''Userdata'');'</span>,<span class="keyword">...</span>
0146                           <span class="string">'MRIOpen.mri.type = popupstr(MRIOpen.handles.PmriType);'</span>,<span class="keyword">...</span>
0147                           <span class="string">'set(gcbf,''Userdata'',MRIOpen); clear MRIOpen;'</span>));
0148     
0149     <span class="keyword">switch</span> mri.orient
0150         <span class="keyword">case</span> <span class="string">'auto'</span>,                mriOrient = 1;
0151         <span class="keyword">case</span> <span class="string">'axial unflipped'</span>,     mriOrient = 2;
0152         <span class="keyword">case</span> <span class="string">'coronal unflipped'</span>,   mriOrient = 3;
0153         <span class="keyword">case</span> <span class="string">'sagittal unflipped'</span>,  mriOrient = 4;
0154         <span class="keyword">case</span> <span class="string">'axial flipped'</span>,       mriOrient = 5;
0155         <span class="keyword">case</span> <span class="string">'coronal flipped'</span>,     mriOrient = 6;
0156         <span class="keyword">case</span> <span class="string">'sagittal flipped'</span>,    mriOrient = 7;
0157         <span class="keyword">otherwise</span>,                  mriOrient = 1;
0158     <span class="keyword">end</span>
0159     
0160     G.PmriOrient = uicontrol(<span class="string">'Tag'</span>,<span class="string">'PmriOrient'</span>,<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'popupmenu'</span>,<span class="keyword">...</span>
0161         <span class="string">'Units'</span>,<span class="string">'Normalized'</span>,Font,  <span class="keyword">...</span>
0162         <span class="string">'Position'</span>,[.50 .75 .25 .2],<span class="keyword">...</span>
0163         <span class="string">'TooltipString'</span>,<span class="string">'Force loading with this orientation, otherwise use auto detection'</span>,<span class="keyword">...</span>
0164         <span class="string">'String'</span>,{<span class="string">'auto'</span> <span class="string">'axial unflipped'</span> <span class="string">'coronal unflipped'</span> <span class="string">'sagittal unflipped'</span> <span class="keyword">...</span>
0165                   <span class="string">'axial flipped'</span>  <span class="string">'coronal flipped'</span>  <span class="string">'sagittal flipped'</span>},<span class="string">'Value'</span>,mriOrient,<span class="keyword">...</span>
0166         <span class="string">'Callback'</span>,strcat(<span class="string">'MRIOpen = get(gcbf,''Userdata'');'</span>,<span class="keyword">...</span>
0167                           <span class="string">'MRIOpen.mri.orient = popupstr(MRIOpen.handles.PmriOrient);'</span>,<span class="keyword">...</span>
0168                           <span class="string">'set(gcbf,''Userdata'',MRIOpen); clear MRIOpen;'</span>));
0169     
0170     G.TmriSeries = uicontrol(<span class="string">'Tag'</span>,<span class="string">'TmriSeries'</span>,<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'edit'</span>,<span class="keyword">...</span>
0171         <span class="string">'Units'</span>,<span class="string">'Normalized'</span>,Font,  <span class="keyword">...</span>
0172         <span class="string">'Position'</span>,[.75 .75 .25 .2],<span class="keyword">...</span>
0173         <span class="string">'TooltipString'</span>,<span class="string">'GE Series Number'</span>,<span class="keyword">...</span>
0174         <span class="string">'String'</span>,num2str(mri.series),<span class="keyword">...</span>
0175         <span class="string">'Callback'</span>,strcat(<span class="string">'MRIOpen = get(gcbf,''Userdata'');'</span>,<span class="keyword">...</span>
0176                           <span class="string">'MRIOpen.mri.series = str2num(MRIOpen.handles.TmriSeries);'</span>,<span class="keyword">...</span>
0177                           <span class="string">'set(gcbf,''Userdata'',MRIOpen); clear MRIOpen;'</span>));
0178     
0179     G.Title_path = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>,Font, <span class="keyword">...</span>
0180         <span class="string">'Position'</span>,[.01 .50 .17 .2],<span class="keyword">...</span>
0181         <span class="string">'String'</span>,<span class="string">'Path'</span>,<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>);
0182     G.EmriPath = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'edit'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>,Font,  <span class="keyword">...</span>
0183         <span class="string">'Position'</span>,[.20 .50 .58 .2], <span class="string">'String'</span>,mri.path,<span class="keyword">...</span>
0184         <span class="string">'Callback'</span>,strcat(<span class="string">'MRIOpen = get(gcbf,''Userdata'');'</span>,<span class="keyword">...</span>
0185                           <span class="string">'MRIOpen.mri.path = get(MRIOpen.handles.EmriPath,''String'');'</span>,<span class="keyword">...</span>
0186                           <span class="string">'set(gcbf,''Userdata'',MRIOpen); clear MRIOpen;'</span>));
0187     
0188     G.Title_file = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>,Font, <span class="keyword">...</span>
0189         <span class="string">'Position'</span>,[.01 .25 .17 .2],<span class="keyword">...</span>
0190         <span class="string">'String'</span>,<span class="string">'File'</span>,<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>);
0191     G.EmriFile = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'edit'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>,Font,  <span class="keyword">...</span>
0192         <span class="string">'Position'</span>,[.20 .25 .58 .2], <span class="string">'String'</span>,mri.file,<span class="keyword">...</span>
0193         <span class="string">'Callback'</span>,strcat(<span class="string">'MRIOpen = get(gcbf,''Userdata'');'</span>,<span class="keyword">...</span>
0194                           <span class="string">'MRIOpen.mri.file = get(MRIOpen.handles.EmriFile,''String'');'</span>,<span class="keyword">...</span>
0195                           <span class="string">'set(gcbf,''Userdata'',MRIOpen); clear MRIOpen;'</span>));
0196     
0197     Font.FontWeight = <span class="string">'bold'</span>;
0198     
0199     <span class="comment">% BROWSE: Look for the data</span>
0200     browsecommand = strcat(<span class="string">'MRIOpen = get(gcbf,''Userdata'');'</span>,<span class="keyword">...</span>
0201         <span class="string">'cd(MRIOpen.mri.path);'</span>,<span class="keyword">...</span>
0202         <span class="string">'[file, path] = uigetfile('</span>,<span class="keyword">...</span>
0203         <span class="string">'{''*.hdr;*.img'', ''Analyze Files (*.hdr,*.img)'';'</span>, <span class="keyword">...</span>
0204         <span class="string">' ''COR*'', ''FreeSurfer COR-??? files'';'</span>, <span class="keyword">...</span>
0205         <span class="string">' ''*.mat'', ''MATLAB Files (*.mat)'';'</span>, <span class="keyword">...</span>
0206         <span class="string">' ''*.*'',   ''All Files (*.*)''},'</span>, <span class="keyword">...</span>
0207         <span class="string">'''Select MRI File'');'</span>,<span class="keyword">...</span>
0208         <span class="string">'if ~isequal(path,0), MRIOpen.mri.path = path; end;'</span>,<span class="keyword">...</span>
0209         <span class="string">'if ~isequal(file,0), MRIOpen.mri.file = file; end;'</span>,<span class="keyword">...</span>
0210         <span class="string">'set(MRIOpen.handles.EmriPath,''String'',MRIOpen.mri.path);'</span>,<span class="keyword">...</span>
0211         <span class="string">'set(MRIOpen.handles.EmriFile,''String'',MRIOpen.mri.file);'</span>,<span class="keyword">...</span>
0212         <span class="string">'if ~isempty(findstr(file,''.hdr'')) | ~isempty(findstr(file,''.img'')), '</span>,<span class="keyword">...</span>
0213             <span class="string">'set(MRIOpen.handles.PmriType,''Value'',1); '</span>,<span class="keyword">...</span>
0214             <span class="string">'MRIOpen.mri.type = popupstr(MRIOpen.handles.PmriType);'</span>,<span class="keyword">...</span>
0215         <span class="string">'elseif ~isempty(findstr(file,''COR'')), '</span>,<span class="keyword">...</span>
0216             <span class="string">'set(MRIOpen.handles.PmriType,''Value'',2); '</span>,<span class="keyword">...</span>
0217             <span class="string">'MRIOpen.mri.type = popupstr(MRIOpen.handles.PmriType);'</span>,<span class="keyword">...</span>
0218         <span class="string">'else, '</span>,<span class="keyword">...</span>
0219             <span class="string">'set(MRIOpen.handles.PmriType,''Value'',3); '</span>,<span class="keyword">...</span>
0220             <span class="string">'MRIOpen.mri.type = popupstr(MRIOpen.handles.PmriType);'</span>,<span class="keyword">...</span>
0221         <span class="string">'end;'</span>,<span class="keyword">...</span>
0222         <span class="string">'set(gcbf,''Userdata'',MRIOpen); clear MRIOpen file path;'</span>);
0223     G.BmriFile = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>,Font, <span class="keyword">...</span>
0224         <span class="string">'Position'</span>,[.01 .01 .17 .2], <span class="string">'String'</span>,<span class="string">'BROWSE'</span>,<span class="keyword">...</span>
0225         <span class="string">'BackgroundColor'</span>,[0.8 0.8 0.0],<span class="keyword">...</span>
0226         <span class="string">'ForegroundColor'</span>, [1 1 1], <span class="string">'HorizontalAlignment'</span>, <span class="string">'center'</span>,<span class="keyword">...</span>
0227         <span class="string">'Callback'</span>, browsecommand );
0228     
0229     <span class="comment">% PLOT: Load &amp; plot the data!</span>
0230     G.Bplot = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>, Font, <span class="keyword">...</span>
0231         <span class="string">'Position'</span>,[.20 .01 .18 .2],<span class="keyword">...</span>
0232         <span class="string">'String'</span>,<span class="string">'PLOT'</span>,<span class="string">'BusyAction'</span>,<span class="string">'queue'</span>,<span class="keyword">...</span>
0233         <span class="string">'TooltipString'</span>,<span class="string">'Plot the MRI data and return p struct.'</span>,<span class="keyword">...</span>
0234         <span class="string">'BackgroundColor'</span>,[0.0 0.5 0.0],<span class="keyword">...</span>
0235         <span class="string">'ForegroundColor'</span>, [1 1 1], <span class="string">'HorizontalAlignment'</span>, <span class="string">'center'</span>,<span class="keyword">...</span>
0236         <span class="string">'Callback'</span>,strcat(<span class="string">'MRIOpen = get(gcbf,''Userdata'');'</span>,<span class="keyword">...</span>
0237                           <span class="string">'mri = gui_mri_open(MRIOpen.mri,''plot'');'</span>,<span class="keyword">...</span>
0238                           <span class="string">'clear MRIOpen;'</span>));
0239 
0240     <span class="comment">% Save As</span>
0241     G.Bsave = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>, Font, <span class="keyword">...</span>
0242         <span class="string">'Position'</span>,[.40 .01 .18 .2],<span class="string">'HorizontalAlignment'</span>, <span class="string">'center'</span>,<span class="keyword">...</span>
0243         <span class="string">'String'</span>,<span class="string">'SAVE AS'</span>,<span class="string">'TooltipString'</span>,<span class="string">'MRI File Conversion Tool (not implemented yet)'</span>,<span class="keyword">...</span>
0244         <span class="string">'BusyAction'</span>,<span class="string">'queue'</span>,<span class="keyword">...</span>
0245         <span class="string">'Visible'</span>,<span class="string">'on'</span>,<span class="keyword">...</span>
0246         <span class="string">'BackgroundColor'</span>,[0.0 0.0 0.75],<span class="keyword">...</span>
0247         <span class="string">'ForegroundColor'</span>, [1 1 1], <span class="string">'HorizontalAlignment'</span>, <span class="string">'center'</span>,<span class="keyword">...</span>
0248         <span class="string">'Callback'</span>,strcat(<span class="string">'MRIOpen = get(gcbf,''Userdata'');'</span>,<span class="keyword">...</span>
0249                           <span class="string">'mri = gui_mri_open(MRIOpen.mri,''save'');'</span>,<span class="keyword">...</span>
0250                           <span class="string">'clear MRIOpen;'</span>));
0251 
0252     <span class="comment">% Quit, return file parameters</span>
0253     G.Breturn = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>, Font, <span class="keyword">...</span>
0254         <span class="string">'Position'</span>,[.60 .01 .18 .2],<span class="keyword">...</span>
0255         <span class="string">'String'</span>,<span class="string">'RETURN'</span>,<span class="string">'BusyAction'</span>,<span class="string">'queue'</span>,<span class="keyword">...</span>
0256         <span class="string">'TooltipString'</span>,<span class="string">'Return p struct to workspace and parent GUI.'</span>,<span class="keyword">...</span>
0257         <span class="string">'BackgroundColor'</span>,[0.75 0.0 0.0],<span class="keyword">...</span>
0258         <span class="string">'ForegroundColor'</span>, [1 1 1], <span class="string">'HorizontalAlignment'</span>, <span class="string">'center'</span>,<span class="keyword">...</span>
0259         <span class="string">'Callback'</span>,strcat(<span class="string">'MRIOpen = get(gcbf,''Userdata'');'</span>,<span class="keyword">...</span>
0260                           <span class="string">'mri = gui_mri_open(MRIOpen.mri,''return'');'</span>,<span class="keyword">...</span>
0261                           <span class="string">'clear MRIOpen;'</span>));
0262     
0263     <span class="comment">% Cancel</span>
0264     G.Bcancel = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>, Font, <span class="keyword">...</span>
0265         <span class="string">'Position'</span>,[.80 .01 .18 .2],<span class="keyword">...</span>
0266         <span class="string">'String'</span>,<span class="string">'CANCEL'</span>,<span class="string">'BusyAction'</span>,<span class="string">'queue'</span>,<span class="keyword">...</span>
0267         <span class="string">'TooltipString'</span>,<span class="string">'Close, do not return parameters.'</span>,<span class="keyword">...</span>
0268         <span class="string">'BackgroundColor'</span>,[0.75 0.0 0.0],<span class="keyword">...</span>
0269         <span class="string">'ForegroundColor'</span>, [1 1 1], <span class="string">'HorizontalAlignment'</span>, <span class="string">'center'</span>,<span class="keyword">...</span>
0270         <span class="string">'Callback'</span>,strcat(<span class="string">'MRIOpen = get(gcbf,''Userdata'');'</span>,<span class="keyword">...</span>
0271                           <span class="string">'mri = gui_mri_open(MRIOpen.mri,''cancel'');'</span>,<span class="keyword">...</span>
0272                           <span class="string">'clear MRIOpen;'</span>));
0273     
0274     
0275     <span class="comment">% Help</span>
0276     G.Bhelp = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>, Font, <span class="keyword">...</span>
0277         <span class="string">'Position'</span>,[.80 .25 .18 .2],<span class="string">'String'</span>,<span class="string">'Help'</span>,<span class="string">'BusyAction'</span>,<span class="string">'queue'</span>,<span class="keyword">...</span>
0278         <span class="string">'BackgroundColor'</span>,[1 1 0],<span class="keyword">...</span>
0279         <span class="string">'ForegroundColor'</span>,[0 0 0], <span class="string">'HorizontalAlignment'</span>, <span class="string">'center'</span>,<span class="keyword">...</span>
0280         <span class="string">'Callback'</span>,<span class="string">'doc mri_toolbox;'</span>);
0281     
0282     <span class="comment">% Hold GUI Open checkbox</span>
0283     G.Bhold = uicontrol(<span class="string">'Parent'</span>,GUI,<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'Units'</span>,<span class="string">'Normalized'</span>, Font, <span class="keyword">...</span>
0284         <span class="string">'Position'</span>,[.80 .50 .18 .2],<span class="string">'String'</span>,<span class="string">'Hold GUI'</span>,<span class="string">'BusyAction'</span>,<span class="string">'queue'</span>,<span class="keyword">...</span>
0285         <span class="string">'TooltipString'</span>,<span class="string">'MRI File Load GUI remains open after ''Plot'' or ''Return'' commands.'</span>,<span class="keyword">...</span>
0286         <span class="string">'Value'</span>,mri.hold,<span class="string">'HorizontalAlignment'</span>, <span class="string">'center'</span>);
0287     
0288     
0289     <span class="comment">% Store userdata</span>
0290     <span class="keyword">if</span> exist(<span class="string">'parent'</span>,<span class="string">'var'</span>), MRIOpen.parent.gui = parent; <span class="keyword">end</span>
0291     MRIOpen.gui = GUI;          
0292     MRIOpen.handles = G;
0293     MRIOpen.mri = mri;
0294     set(GUI,<span class="string">'Userdata'</span>,MRIOpen);
0295     set(GUI,<span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>);
0296     
0297 <span class="keyword">return</span></pre></div>
<hr><address>Generated on Mon 29-Mar-2004 13:14:32 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>